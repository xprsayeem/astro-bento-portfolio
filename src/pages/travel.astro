---
import Globe from "../components/Globe";
import BasicLayout from "../layouts/BasicLayout.astro";
---

<script>
  import { animate, type AnimationSequence } from "motion";

  const sequence = [
    [
      ".loaderRef",
      { opacity: [1, 0], pointerEvents: "none" },
      { type: "spring", easing: "ease-out" },
    ],
    [
      ".fade-in",
      { opacity: [0, 1], y: [20, 0] },
      { duration: 0.6, delay: 0.2, easing: "ease-out" }
    ]
  ];

  animate(sequence as AnimationSequence);
</script>

<BasicLayout
  description="A 3d globe showing countries that I have visited so far"
  page="travel"
  title="Sayeem Mahfuz - Visited Countries"
>
  <!-- Subtle gradient background -->
  <div class="fixed inset-0 bg-gradient-to-br from-darkslate-700 via-darkslate-700 to-neutral-900 -z-10"></div>
  
  <!-- Animated subtle orbs in background -->
  <div class="fixed inset-0 overflow-hidden -z-10 opacity-30">
    <div class="absolute top-1/4 -left-20 w-96 h-96 bg-red-500/10 rounded-full blur-3xl animate-pulse"></div>
    <div class="absolute bottom-1/4 -right-20 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl animate-pulse" style="animation-delay: 1s;"></div>
  </div>

  <!-- Fixed Back Button with enhanced hover -->
  <a 
    class="group text-white fixed bg-neutral-900/80 backdrop-blur-sm hover:bg-neutral-800 top-4 left-4 px-4 py-2 border border-neutral-600 hover:border-neutral-500 rounded-lg z-50 transition-all duration-200"
    href="/"
  >
    <span class="inline-block group-hover:-translate-x-1 transition-transform">‚Üê</span> Back
  </a>

  <!-- Main Container -->
  <div class="w-full h-screen flex flex-col items-center justify-center p-4 overflow-hidden fade-in">
    
    <!-- Title Section with decorative elements -->
    <div class="text-center mt-4 mb-4 sm:mb-6 flex-shrink-0 relative">
      <div class="absolute inset-0 bg-white/5 blur-2xl rounded-full scale-150 -z-10"></div>
      <h1 class="text-xl sm:text-2xl md:text-3xl font-bold text-white mb-1 tracking-tight">
        Countries I've Visited
      </h1>
      <div class="flex items-center justify-center gap-2 text-xs sm:text-sm text-neutral-400">
        <span class="inline-block w-2 h-2 bg-red-500 rounded-full animate-pulse"></span>
        <p>8 countries and counting</p>
      </div>
    </div>

    <!-- Globe Container with shadow effect -->
    <div class="w-full max-w-4xl flex-1 flex items-center justify-center min-h-0 relative">
      <!-- Glow effect behind globe -->
      <div class="absolute inset-0 bg-gradient-to-b from-transparent via-white/5 to-transparent blur-xl -z-10"></div>
      
      <div class="w-full h-full max-h-[60vh] sm:max-h-[65vh] md:max-h-[70vh] relative">
        <!-- Stats overlay -->
        <div class="absolute top-4 right-4 bg-neutral-900/80 backdrop-blur-sm border border-neutral-700 rounded-lg px-3 py-2 text-xs z-10">
          <div class="flex items-center gap-2 text-neutral-300">
            <svg class="w-4 h-4 text-red-500" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
            </svg>
            <span class="font-medium">8 destinations</span>
          </div>
        </div>
        
        <Globe client:load />
      </div>
    </div>

    <!-- Enhanced Country List with continents -->
    <div class="mt-4 mb-4 sm:mt-6 text-center flex-shrink-0 max-w-3xl">
      <!-- Divider line -->
      <div class="flex items-center gap-3 mb-4 justify-center">
        <div class="h-px w-16 bg-gradient-to-r from-transparent to-neutral-600"></div>
        <span class="text-xs text-neutral-500 uppercase tracking-wider">Visited Countries</span>
        <div class="h-px w-16 bg-gradient-to-l from-transparent to-neutral-600"></div>
      </div>

      <div class="flex flex-wrap justify-center gap-2 mx-auto">
        {[
          { name: "Bangladesh", flag: "üáßüá©", continent: "Asia" },
          { name: "Canada", flag: "üá®üá¶", continent: "North America" },
          { name: "USA", flag: "üá∫üá∏", continent: "North America" },
          { name: "Switzerland", flag: "üá®üá≠", continent: "Europe" },
          { name: "Morocco", flag: "üá≤üá¶", continent: "Africa" },
          { name: "Turkey", flag: "üáπüá∑", continent: "Europe/Asia" },
          { name: "Portugal", flag: "üáµüáπ", continent: "Europe" },
          { name: "UAE", flag: "üá¶üá™", continent: "Asia" }
        ].map((country) => (
          <span 
            class="group relative px-3 py-1.5 bg-neutral-900/50 hover:bg-neutral-800/50 backdrop-blur-sm border border-neutral-700/50 hover:border-neutral-600 rounded-full text-xs text-neutral-300 hover:text-white transition-all duration-200 cursor-default"
            title={country.continent}
          >
            <span class="mr-1">{country.flag}</span>
            {country.name}
            <!-- Tooltip on hover -->
            <span class="absolute -top-8 left-1/2 -translate-x-1/2 bg-neutral-900 border border-neutral-700 px-2 py-1 rounded text-[10px] whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none">
              {country.continent}
            </span>
          </span>
        ))}
      </div>

      <!-- Fun stats -->
      <div class="mt-6 flex justify-center gap-6 text-xs text-neutral-500">
        <div class="flex items-center gap-1">
          <span class="text-red-500">‚óè</span>
          <span>4 continents</span>
        </div>
        <div class="flex items-center gap-1">
          <span class="text-blue-500">‚óè</span>
          <span>~35,000 km traveled</span>
        </div>
      </div>
    </div>
  </div>
</BasicLayout>

<style>
  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
  }
  
  .animate-float {
    animation: float 6s ease-in-out infinite;
  }
</style>